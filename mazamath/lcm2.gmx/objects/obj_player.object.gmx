<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>0</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>self.jump = 0;  // Size of jump
self.path = -1;
self.count_x = 0; // Count from nearest bridge segment in X
self.jumping = 0;
self.image_speed = 0;
self.image_index = 1; // face left = 0, face straight = 1, face right = 2
self.recovering = false;
self.selected = false;
self.step = 0; // counter for subimage
self.multiple = 0;    // can be negative also
self.start_jump_x = 0; // x-value at beginning of jump
self.min_segment_x = 0; // Min x-value for player for this segment
self.max_segment_x = 0; // Max x-value for player for this segment
self.move_ready = false; // Whether move is ready
self.name = '';   // Name of this player
self.player = ''; // Which player this is - A or B
self.has_key = false; // Does object have key?

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Recovery period over.
self.recovering = false;
self.image_speed = 0;
self.image_index = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// End of a Jump

// If sequence of jumps not over, continue to next jump
if (self.jumping &gt; 1) {
  sound_play(self.sound);
  path_start(self.path, 30 /* speed */, 0 /*endaction */,false /* absolute*/);
  return 0;
}
self.jumping = 0;
self.multiple = 0;
self.move_ready = false;

// If not LCM/GCD room, return
if (!instance_exists(obj_sinhika)) return 0;

// If other player already recognized success in finding LCM, return
if (obj_sinhika.speed == 0) return 0;

// If LCM found, take success action
if (global.problem_type[global.num_bridge_segments] == global.LCM) {
  end_lcm();
} 

// If GCD found, take success action
if (global.problem_type[global.num_bridge_segments] == global.GCD) {
  end_gcd();
}

// Take time to recover from jump
self.alarm[1] = 10;
self.image_speed = 1;
self.recovering = true;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!self.selected) return 0;
if (mouse_check_button(mb_left)) {
  var x_distance, new_multiple;
  x_distance = mouse_x - (self.x + self.sprite_width/2);
  new_multiple = x_distance div 10 + 1; // Converts simple click to 1
  // Disallow multiple larger than 10
  if (abs(new_multiple) &gt; 10) {
    new_multiple = sign(new_multiple) * 10;
  }
  if (self.multiple != new_multiple) {
    sound_play(snd_click);
    self.multiple = new_multiple;
  }
  // Clamp multiple so that self.x &gt;= self.min_segment_x i.e. cannot go behind stage beginning.
  if (self.x + self.multiple * self.jump * global.GRID_SPACE_WIDTH &lt; self.min_segment_x) {
    self.multiple = (self.min_segment_x - self.x) div (self.jump * global.GRID_SPACE_WIDTH);
  }
  image_index = sign(self.multiple) + 1; // 0 = right, 1 = straight, 2 = left
}

if (mouse_check_button(mb_right)) { // Always set in X direction
  var distance, new_jump;
  distance = distance_to_point(mouse_x - self.sprite_width/2, mouse_y - self.sprite_height/2);
  new_jump = min(10, distance div 10 + 1);
  if (self.jump != new_jump) {
    sound_play(snd_click);
    self.jump = new_jump;
  }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="57">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (not self.selected) return 0;

self.selected = false;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="56">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (not self.selected) return 0;

self.selected = false;

// Cannot move if still recovering
if (self.recovering) return 0;

self.move_ready = true;
send_move(self.multiple);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Select only if user is at beginning location on bridge for GCD problem
if (global.problem_type[global.num_bridge_segments] == global.GCD &amp;&amp; 
    self.jumping == 0 &amp;&amp; 
    self.x == self.min_segment_x) {
  self.selected = true;
  self.has_key = false;
  obj_key.visible = true;
}
// Select also if in modelling_room
if (room == Modelling_Room) {
  self.selected = true;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Select only if there is a positive jump
if (self.jump &gt; 0) {
  self.selected = true;
} else if (self.jump == 0) {
  var msg;
  msg = instance_create(self.x, self.y, obj_message);
  msg.message = "Use right mouse to set jump length.#Then pull to jump in the direction you want.";
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>self.jumping -= 1;
sound_play(snd_wood);
// Draw wood tiles for numbers - the jump number is a wood_multiple tile
var j, i_wood, wood_obj;

if (self.count_x != 0) {
  wood_obj = obj_wood_multiple;
} else {
  wood_obj = obj_wood;
}

if (self.x &gt; self.max_segment_x) {
  var final;
  final = self.start_jump_x + sign(self.multiple) * self.jump * global.GRID_SPACE_WIDTH;
  create_wood_bridge(self.start_jump_x, self.y + global.GRID_SPACE_WIDTH, 
                     final, self.count_x, wood_obj);
  self.max_segment_x += self.jump * global.GRID_SPACE_WIDTH;
  self.count_x += self.jump;
}

self.start_jump_x = self.x;
self.alarm[0] = 10; // Timeout so that wood gets drawn

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self();
draw_set_halign(fa_center);
draw_set_valign(fa_middle);
draw_set_font(font_multiple);
if (self.selected) {
  draw_set_color(c_white);
  self.step = (self.step + 1) mod sprite_get_number(self.sprite_index);
  draw_sprite(self.sprite_index, step, mouse_x, mouse_y);
  var value;
  if (mouse_check_button(mb_left)) {
    draw_set_color(c_white);
    value = string(abs(self.multiple)) + " x " + string(self.jump);
  } else {
    draw_set_color(c_red);
    value = self.jump;
  }
  draw_text(self.x + global.GRID_SPACE_WIDTH/2, self.y + global.GRID_SPACE_WIDTH/2, value);
}
// Display the JUMP value
draw_set_color(c_red);
draw_text_transformed(self.x + global.GRID_SPACE_WIDTH*1.0, 
                      self.y + global.GRID_SPACE_WIDTH*0.4, self.jump,
                      0.75, 0.75, 0);

draw_set_color(c_black);
draw_text_transformed(self.x + global.GRID_SPACE_WIDTH, self.y + 3*global.GRID_SPACE_WIDTH, 
                      self.name, 0.75, 0.75, 0);


</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
</object>
